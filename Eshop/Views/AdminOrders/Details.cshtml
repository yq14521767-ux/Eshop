@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@model Eshop.Models.Order
@{
	ViewData["Title"] = "订单详情";
}

<div class="page-header">
	<h2 class="m-0">订单详情</h2>
</div>

<div class="row g-3 mb-3">
	<div class="col-12 col-md-6 col-lg-4">
		<div class="list-group small">
			<div class="list-group-item d-flex justify-content-between"><span class="text-muted">订单号</span><span>@Model.Id</span></div>
			<div class="list-group-item d-flex justify-content-between"><span class="text-muted">用户</span><span>@Model.User.UserName</span></div>
			<div class="list-group-item d-flex justify-content-between"><span class="text-muted">下单时间</span><span>@Model.OrderDate</span></div>
			<div class="list-group-item d-flex justify-content-between"><span class="text-muted">状态</span><span>@Model.Status</span></div>
			<div class="list-group-item d-flex justify-content-between"><span class="text-muted">总金额</span><span>@Model.TotalAmount.ToString("C")</span></div>
			
		</div>
	</div>
</div>

<h3 class="h5">商品列表</h3>
<table class="table table-hover table-bordered align-middle">
	<thead>
		<tr>
			<th>商品</th>
			<th>数量</th>
			<th>单价</th>
			<th>小计</th>
		</tr>
	</thead>

	<tbody>
		@foreach (var item in Model.OrderItems)
		{
			<tr>
				<td>@item.Product.Name</td>
				<td>@item.Quantity</td>
				<td>@item.Product.Price.ToString("C")</td>
				<td>@((item.Quantity * item.UnitPrice).ToString("C"))</td>
			</tr>
		}
	</tbody>

</table>

<div>
	<a asp-action="DeleteO" asp-route-id="@Model.Id" class="btn btn-danger" onclick="return confirm('确定要删除该订单吗？');"> 删除</a>
	<a asp-action="Index" class="btn btn-outline-secondary">返回</a>
</div>
